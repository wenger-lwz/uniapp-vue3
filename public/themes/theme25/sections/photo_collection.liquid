{% assign defaultImg = 'oss/operation/036e2ac985e890225e74b9d4f387d340.png' %}
{% assign padding_top = section.settings.padding.top | default: "0" %}
{% assign padding_bottom = section.settings.padding.bottom | default: "0" %}
{% if section.settings.padding.right == blank and section.settings.padding.left == blank %}
  {% assign padding_right = section.settings.padding.right | default: settings.general_layout_spacing %}
  {% assign padding_left = section.settings.padding.left | default: settings.general_layout_spacing %}
{% else %}
  {% assign padding_right = section.settings.padding.right | default: 0 %}
  {% assign padding_left = section.settings.padding.left | default: 0 %}
{% endif %}
<style>
  .container{{section.id}}{
    max-width:{% if section.settings.max_width == blank %}var(--general-layout-width){% else %}{{section.settings.max_width}}px{% endif %};
    padding-top:{{padding_top | times: 0.6 }}px;
    padding-bottom:{{padding_bottom | times: 0.6 }}px;
  }
  @media (min-width: {{settings.breakpoint}}px) {
    .container{{section.id}}{
      padding-top:{{padding_top}}px;
      padding-bottom:{{padding_bottom}}px;
      padding-left:{{padding_left}}px;
      padding-right:{{padding_right}}px;
    }
    .content{{section.id}}{
      grid-row-gap: {{section.settings.space}};
      row-gap: {{section.settings.space}};
      grid-column-gap: {{section.settings.space}};
      column-gap: {{section.settings.space}};
    }
  }
</style>
  <div class="tw-mx-auto tw-px-5 container{{section.id}}">
    <div class="tw-flex tw-flex-nowrap tw-overflow-x-auto hide-scrollbar  tw-space-x-4 lg:tw-space-x-0 lg:tw-grid lg:tw-grid-cols-{{section.settings.columns}} content{{section.id}}">
      {% for block in section.blocks %}
        {% assign image = block.settings.image %}
        {% assign src = block.settings.link.url %}
        <div class="tw-relative tw-w-3/4 lg:tw-w-auto tw-flex-shrink-0">
          <a {% if src %}href="{{src}}"{% endif %} class="tw-relative tw-block" {% if image %} style="padding-bottom:{{images[image].height | image_padding_bottom : images[image].width, origin:'unlimit'}}" {% endif %}>
            {% if image %}
              <img class="tw-absolute tw-inset-0 tw-m-auto tw-w-full tw-h-full {%if settings.general_style == 'round'%}tw-rounded-lg{%endif%} lazyload" src="{{shop.default_img}}" data-src="{{ image  | img_url: '{width}x' }}"  data-sizes="auto" alt="{{ images[image].alt | escape }}">
            {% else %}
              {{ 'image' | placeholder_svg_tag: 'tw-block tw-fill-svg tw-bg-svg' }}
            {% endif %}
          </a>
        </div>
      {% endfor %}
    </div>
  </div>

{% schema %}
{
  "name": "photo_collection",
  "max_blocks": 100,
  "settings": [
    {
      "type": "header",
      "content": {
        "en-US": "Settings",
        "zh-CN": "设置"
      }
    },
    {
      "type": "select",
      "id": "space",
      "label": {
        "en-US": "Space",
        "zh-CN": "格子间距"
      },
      "default": "30px",
      "options": [
        {
          "value": "0px",
          "label": {
            "en-US": "No spacing",
            "zh-CN": "无间距"
          }
        },
        {
          "value": "15px",
          "label": {
            "en-US": "15px",
            "zh-CN": "15px"
          }
        },
        {
          "value": "20px",
          "label": {
            "en-US": "20px",
            "zh-CN": "20px"
          }
        },
        {
          "value": "30px",
          "label": {
            "en-US": "30px",
            "zh-CN": "30px"
          }
        },
        {
          "value": "40px",
          "label": {
            "en-US": "40px",
            "zh-CN": "40px"
          }
        }
      ]
    },
    {
      "type": "range",
      "id": "columns",
      "step": 1,
      "max": 6,
      "min": 1,
      "label": {
        "en-US": "Columns",
        "zh-CN": "分栏"
      },
      "default": 3
    },
    {
      "type": "header",
      "content": {
        "en-US": "Layout",
        "zh-CN": "布局"
      }
    },
    {
      "type": "padding",
      "id": "padding",
      "label": {
        "en-US": "Content space",
        "zh-CN": "内容留白"
      },
      "default": {
        "top": "80",
        "right": "",
        "bottom": "80",
        "left": ""
      },
      "info": {
        "zh-CN": "内容留白单位为px",
        "en-US": "Content space unit in px"
      }
    },
    {
      "type": "text",
      "id": "max_width",
      "label": {
        "en-US": "Max content width",
        "zh-CN": "最大内容宽度"
      },
      "placeholder": {
        "zh-CN": "输入最大内容宽度",
        "en-US": "Enter max content width"
      },
      "info": {
        "zh-CN": "最大内容宽度单位为px",
        "en-US": "Max content width unit in px"
      },
      "default": "",
      "props": {
        "type": "number"
      }
    },
    {
      "type": "header",
      "content": {
        "en-US": "Content",
        "zh-CN": "内容"
      }
    }
  ],
  "blocks": [
    {
      "type": "collection",
      "name": {
        "en-US": "Image",
        "zh-CN": "图片"
      },
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": {
            "en-US": "Image",
            "zh-CN": "图片"
          },
          "default": ""
        },
        {
          "type": "url",
          "id": "link",
          "label": {
            "zh-CN": "链接",
            "en-US": "Link URL"
          },
          "default": ""
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "photo_collection",
      "icon": "oss/operation/b950c409371f126944b7b9ef9a8db876.svg",
      "cname": {
        "en-US": "Gallery",
        "zh-CN": "图集"
      },
      "category": {
        "en-US": "Material",
        "zh-CN": "素材"
      },
      "ccategory": {
        "en-US": "Material",
        "zh-CN": "素材"
      },
      "display": true,
      "blocks": [
        {
          "type": "collection",
          "settings": {
            "image": ""
          }
        },
        {
          "type": "collection",
          "settings": {
            "image": ""
          }
        },
        {
          "type": "collection",
          "settings": {
            "image": ""
          }
        }
      ]
    }
  ]
}
{% endschema %}